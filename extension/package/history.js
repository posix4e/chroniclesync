import{c as B,j as s,r as t}from"./assets/client-DurQqVcw.js";import{H as I}from"./assets/HistoryStore-kHGyP3yn.js";const h=10,A=()=>{const[l,x]=t.useState([]),[p,v]=t.useState([]),[i,j]=t.useState(""),[n,d]=t.useState(1),[m,w]=t.useState(1),[o,g]=t.useState({platform:"",browserName:""}),[y,b]=t.useState([]),[N,S]=t.useState([]);t.useEffect(()=>{C()},[]),t.useEffect(()=>{if(l.length>0){const e=[...new Set(l.map(a=>a.platform))],r=[...new Set(l.map(a=>a.browserName))];b(e),S(r)}},[l]),t.useEffect(()=>{const e=l.filter(r=>{const a=i===""||r.title.toLowerCase().includes(i.toLowerCase())||r.url.toLowerCase().includes(i.toLowerCase()),c=o.platform===""||r.platform===o.platform,T=o.browserName===""||r.browserName===o.browserName;return a&&c&&T});v(e),w(Math.ceil(e.length/h)),d(1)},[i,o,l]);const C=async()=>{const e=new I;await e.init();const r=await e.getEntries();x(r.sort((a,c)=>c.visitTime-a.visitTime))},P=e=>{j(e.target.value)},u=(e,r)=>{g(a=>({...a,[e]:r}))},E=()=>{const e=(n-1)*h;return p.slice(e,e+h)},f=e=>{d(e)},H=e=>{chrome.tabs.create({url:e})};return s.jsxs("div",{className:"history-container",children:[s.jsx("div",{className:"history-header",children:s.jsx("h2",{children:"Browsing History"})}),s.jsxs("div",{className:"history-filters",children:[s.jsx("input",{type:"text",className:"history-search",placeholder:"Search history...",value:i,onChange:P}),s.jsxs("div",{className:"filter-controls",children:[s.jsxs("select",{value:o.platform,onChange:e=>u("platform",e.target.value),className:"platform-filter",children:[s.jsx("option",{value:"",children:"All Platforms"}),y.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsxs("select",{value:o.browserName,onChange:e=>u("browserName",e.target.value),className:"browser-filter",children:[s.jsx("option",{value:"",children:"All Browsers"}),N.map(e=>s.jsx("option",{value:e,children:e},e))]})]})]}),s.jsx("div",{className:"history-list",children:E().map(e=>s.jsxs("div",{className:"history-item",onClick:()=>H(e.url),children:[s.jsx("div",{children:e.title}),s.jsxs("div",{style:{fontSize:"0.8em",color:"#666"},children:[e.url,s.jsx("br",{}),new Date(e.visitTime).toLocaleString(),s.jsx("br",{}),s.jsxs("span",{style:{color:"#888"},children:[e.platform," â€¢ ",e.browserName]})]})]},e.visitId))}),s.jsxs("div",{className:"pagination",children:[s.jsx("button",{onClick:()=>f(n-1),disabled:n===1,children:"Previous"}),s.jsxs("span",{children:["Page ",n," of ",m]}),s.jsx("button",{onClick:()=>f(n+1),disabled:n===m,children:"Next"})]})]})},L=B.createRoot(document.getElementById("root"));L.render(s.jsx(A,{}));
